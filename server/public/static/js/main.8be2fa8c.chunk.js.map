{"version":3,"sources":["API.js","HomeWorkspaceComponents.js","Home.js","utility.js","Header.js","Toolbar.js","Notes.js","Reports.js","event-utils.js","Calendar.js","FileManager.js","Workspace.js","App.js","reportWebVitals.js","index.js"],"names":["getJson","httpResponsePromise","Promise","resolve","reject","then","response","ok","json","catch","err","error","obj","a","fetch","waJson","console","log","workarea","method","headers","body","JSON","stringify","notesJson","API","getAllWorkareas","insertWorkarea","deleteWorkarea","workareaId","getAllNotes","HomeWorkspace","props","useState","showControls","setShowControls","Card","className","style","width","onMouseEnter","onMouseLeave","Header","ws","status","to","pathname","state","currentWorkspace","name","HomeWorkspaceControls","id","deleteWorkspace","HomeWorkspaceForm","setName","errorMessage","setErrorMessage","validated","setValidated","handleSubmit","event","preventDefault","valid","addNewWorkarea","onDone","Form","onSubmit","Group","controlId","Control","type","value","onChange","ev","target","autoFocus","Feedback","size","color","onClick","onClose","e","CustomToggle","React","forwardRef","ref","children","href","CustomMenu","labeledBy","Children","toArray","filter","child","toLowerCase","startsWith","Dropdown","paddingTop","Toggle","as","Menu","Item","marginLeft","Home","formVisible","setFormVisible","Container","workareaList","map","w","APIs","setDirty","getWindowDimensions","window","innerWidth","height","innerHeight","utility","moveNote","unsortedNotes","currentNote","direction","currentIndex","findIndex","note","previousIndex","previous","afterIndex","after","prevSqIndex","afterSqIndex","insertNote","newNote","push","getMaxId","list","reduce","b","useWindowDimensions","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","insertBefore","string","insert","index","slice","insertBeforeAndAfter","insertAfter","startIndex","endIndex","getMaxSlot","wsWindows","max","Object","entries","forEach","slot","location","useLocation","manageWindows","currentWindow","oldWindows","show","key","undefined","nWsWindows","setWsWindows","Navbar","expand","elementRef","Brand","FormControl","placeholder","Button","variant","Nav","display","flexDirection","Link","notebook","calendar","files","reports","ToolbarNotes","bg","fluid","search","setSearch","Note","childrenNotes","filterNotes","sortNotes","addNote","editNote","deleteNote","showChildren","setShowChildren","editMode","setEditMode","NoteForm","minHeight","text","length","includes","minWidth","NoteControls","NoteContent","NoteMenu","noteList","n","workspace","father","NoteMarkdown","position","marginBottom","transform","marginTop","setText","setShow","scrollHeight","onKeyDown","onFocus","onBlur","margin","Notes","newPrev","prev","sortedNotes","find","setNoteList","splice","TextEditor","mdTextarea","document","getElementById","setSelection","start","selectionStart","end","selectionEnd","ToolbarReports","selection","addMdSyntax","syntaxType","newText","Row","alignItems","Col","borderRadius","setPreview","preview","Reports","maxWidth","eventGuid","todayStr","Date","toISOString","replace","createEventId","String","Calendar","weekendsVisible","row","title","insert_date","currentEvents","setCurrentEvents","calendarComponentRef","createRef","mmaxHeight","plugins","dayGridPlugin","timeGridPlugin","interactionPlugin","headerToolbar","left","center","right","initialView","editable","selectable","selectMirror","dayMaxEvents","weekends","initialEvents","dateClick","selectInfo","calendarApi","current","getApi","changeView","gotoDate","dateStr","eventContent","eventInfo","timeText","eventClick","clickInfo","eventsSet","events","FileManager","selectedFile","setSelectedFile","isFilePicked","setIsFilePicked","setList","Label","multiple","src","Workspace","switchViews","slot1","slot2","component","maxHeight","reportList","navHeight","sort","App","dirty","setWorkareaList","setNavHeight","useRef","clientHeight","workareas","notes","oldWorkareas","wa","deleting","exact","path","render","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.8be2fa8c.chunk.js","sourcesContent":["/*\r\n* API calls\r\n*/\r\n\r\nfunction getJson(httpResponsePromise) {\r\n  return new Promise((resolve, reject) => {\r\n    httpResponsePromise\r\n      .then((response) => {\r\n        if (response.ok) {\r\n\r\n          // always return {} from server, never null or non json, otherwise it will fail\r\n          response.json()\r\n            .then(json => resolve(json))\r\n            .catch(err => reject({ error: \"Cannot parse server response1\" }))\r\n\r\n        } else {\r\n          // analyze the cause of error\r\n          response.json()\r\n            .then(obj => reject(obj)) // error msg in the response body\r\n            .catch(err => reject({ error: \"Cannot parse server response2\" })) // something else\r\n        }\r\n      })\r\n      .catch(err => reject({ error: \"Cannot communicate\" })) // connection error\r\n  });\r\n}\r\n\r\nasync function getAllWorkareas() {\r\n  const response = await fetch('/api/workareas');\r\n  const waJson = await response.json();\r\n\r\n  if (response.ok) {\r\n    return waJson;\r\n  } else {\r\n    console.log('error api get all workareas');\r\n  }\r\n}\r\n\r\nasync function insertWorkarea(workarea) {\r\n  return getJson(\r\n    fetch('/api/workareas', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(workarea)\r\n    })\r\n  )\r\n}\r\n\r\nconst deleteWorkarea = (workareaId) => {\r\n  return (\r\n    fetch(`/api/workareas/${workareaId}`,\r\n      {\r\n        method: 'DELETE',\r\n      })\r\n      .then(response => response.json())\r\n      .catch(err => console.log(err))\r\n  );\r\n}\r\n\r\nasync function getAllNotes() {\r\n  const response = await fetch('/api/notes');\r\n  const notesJson = await response.json();\r\n  //console.log(notesJson);\r\n  if (response.ok) {\r\n    return notesJson;\r\n  } else {\r\n    console.log('error api get all notes');\r\n  }\r\n}\r\n\r\nasync function getAllReports() {\r\n  const response = await fetch('/api/reports');\r\n  const waJson = await response.json();\r\n  //console.log(notesJson);\r\n  if (response.ok) {\r\n    return waJson;\r\n  } else {\r\n    console.log('error api get all reports');\r\n  }\r\n}\r\n\r\n\r\nasync function postSomething(something) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch('/api/something', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(something),\r\n    }).then(response => {\r\n      if (response.ok) resolve(null);\r\n      else response.json()\r\n        .then(message => { reject(message) })\r\n        .catch(() => { reject({ error: \"Cannot parse server response on post something.\" }) })\r\n    }).catch(() => { reject({ error: \"Cannot comunicate with server in post something\" }) })\r\n  })\r\n}\r\n\r\nasync function getAllMemes() {\r\n  const response = await fetch('/api/memes');\r\n  const memesJson = await response.json();\r\n  //console.log(memesJson);\r\n  if (response.ok) {\r\n    return memesJson;\r\n  } else {\r\n    console.log('error api get all memes');\r\n  }\r\n}\r\n\r\nfunction deleteSomething(somethingId) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch('/api/something/' + somethingId, { method: 'DELETE', })\r\n      .then((response) => {\r\n        //console.log('delete API: '+ somethingId)\r\n        if (response.ok) resolve(null);\r\n        //analyze cause of error\r\n        else response.json().then(message => { reject(message) }) //error message in the response body\r\n          .catch(() => { reject({ error: \"Cannot comunicate with the server\" }) }) // connection error\r\n      })\r\n  })\r\n}\r\n\r\nconst API = { getAllWorkareas, insertWorkarea, deleteWorkarea, getAllNotes }\r\nexport default API;","import React, { useState } from \"react\";\r\nimport { Card, Form, Dropdown } from \"react-bootstrap\";\r\nimport { X, Check2, Trash2Fill, ThreeDotsVertical, PencilSquare } from \"react-bootstrap-icons\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction HomeWorkspace(props) {\r\n    const [showControls, setShowControls] = useState(false);\r\n\r\n    return (\r\n        <Card\r\n            className={\"mx-3 my-2 hover-scaleup-11\" + (showControls && \" z-index-max\")}\r\n            style={{ width: \"300px\" }}\r\n            onMouseEnter={() => setShowControls(true)}\r\n            onMouseLeave={() => setShowControls(false)}\r\n        >\r\n            <Card.Header className={\"d-flex \" + props.ws.status + (showControls ? \" justify-content-between z-index-max\" : \" justify-content-center\")}>\r\n                {showControls && <span style={{ width: \"18px\" }} />}\r\n                <Link to={ { pathname: \"/workspace\", state: { currentWorkspace: props.ws } }}\r\n                    className=\"me-2 no-link-style w-100\" \r\n                >\r\n                    <h4>{props.ws.name}</h4>\r\n                </Link>\r\n                {showControls && <HomeWorkspaceControls id={props.ws.id} deleteWorkspace={props.deleteWorkspace} />}\r\n            </Card.Header>\r\n        </Card>\r\n    );\r\n}\r\n\r\nfunction HomeWorkspaceForm(props) {\r\n    const [name, setName] = useState('');\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const [validated, setValidated] = useState(false);\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        setErrorMessage('');\r\n\r\n        // basic validation\r\n        let valid = true;\r\n        if (name === '') {\r\n            valid = false;\r\n            setErrorMessage('Please choose a name');\r\n            setValidated(true);\r\n        }\r\n\r\n        if (valid) {\r\n            props.addNewWorkarea(name)\r\n            props.onDone()\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"d-flex justify-content-center my-4\" >\r\n            <Card style={{ width: \"380px\" }} >\r\n                <Card.Header>\r\n                    <Form className=\"d-flex justify-content-center\" validated={validated} onSubmit={handleSubmit}>\r\n                        <Form.Group controlId=\"name\" >\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                value={name}\r\n                                className=\"h6-style transparent p-0 my-1 text-center\"\r\n                                onChange={(ev) => setName(ev.target.value)}\r\n                                autoFocus\r\n                            />\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                {errorMessage}\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n                        <X size={32} color=\"#4c4c4c\" className=\"my-auto ms-2 cursor-pointer hover-scaleup-12\" onClick={() => props.onClose()} />\r\n                        <Check2 size={32} color=\"#4c4c4c\" className=\"my-auto cursor-pointer hover-scaleup-12\" onClick={(e) => handleSubmit(e)} />\r\n                    </Form>\r\n                </Card.Header>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction HomeWorkspaceControls(props) {\r\n    const CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\r\n        <a\r\n            href=\"\"\r\n            ref={ref}\r\n            onClick={e => {\r\n                e.preventDefault();\r\n                onClick(e);\r\n            }}\r\n        >\r\n            {children}\r\n        </a>\r\n    ));\r\n\r\n    const CustomMenu = React.forwardRef(\r\n        ({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\r\n            const [value, setValue] = useState('');\r\n\r\n            return (\r\n                <div\r\n                    ref={ref}\r\n                    style={style}\r\n                    className={className}\r\n                    aria-labelledby={labeledBy}\r\n                >\r\n                    <ul className=\"list-unstyled m-0\">\r\n                        {React.Children.toArray(children).filter(\r\n                            child =>\r\n                                !value || child.props.children.toLowerCase().startsWith(value)\r\n                        )}\r\n                    </ul>\r\n                </div>\r\n            );\r\n        }\r\n    );\r\n    return (\r\n        <Dropdown className=\"ml-auto cursor-pointer hover-opaque z-index-max\" style={{ paddingTop: \"4px\" }} >\r\n            <Dropdown.Toggle as={CustomToggle} id=\"dropdown-custom-components\">\r\n                <ThreeDotsVertical color=\"#4b4b4b\" size={18} />\r\n            </Dropdown.Toggle>\r\n\r\n            <Dropdown.Menu className=\"z-index-max\" as={CustomMenu}>\r\n                <Dropdown.Item\r\n                    className=\"d-flex align-items-center px-3\"\r\n                    onClick={() =>  { console.log(\"HomeWorkspaceControls -> Edit\") } }\r\n                >\r\n                    <PencilSquare className=\"mr-3\" size={16} />\r\n                    <span style={{ marginLeft: \"0.35rem\" }} >Edit</span>\r\n                </Dropdown.Item>\r\n                <Dropdown.Item\r\n                    className=\"d-flex align-items-center px-3\"\r\n                    onClick={() => { console.log(\"HomeWorkspaceControls -> Delete\"); props.deleteWorkspace(props.id)} }\r\n                >\r\n                    <Trash2Fill className=\"mr-3\" size={16} />\r\n                    <span style={{ marginLeft: \"0.35rem\" }} >Delete</span>\r\n                </Dropdown.Item>\r\n            </Dropdown.Menu>\r\n        </Dropdown>\r\n    );\r\n}\r\n\r\nexport { HomeWorkspace, HomeWorkspaceForm };","import APIs from \"./API\";\r\nimport { HomeWorkspace, HomeWorkspaceForm } from \"./HomeWorkspaceComponents\"\r\n\r\nimport { useState } from \"react\";\r\nimport { Container } from \"react-bootstrap\";\r\nimport { PlusSquareFill } from \"react-bootstrap-icons\";\r\n\r\nfunction Home(props) {\r\n    const [formVisible, setFormVisible] = useState(false);\r\n\r\n    const addNewWorkarea = (name) => {\r\n        APIs.insertWorkarea({ name: name })\r\n            .then(() => {\r\n                props.setDirty(true);\r\n                // props.setFormVisible(false);\r\n            })\r\n            .catch(error => console.log(error))\r\n    }    \r\n\r\n    const onClose = () => {\r\n        setFormVisible(false);\r\n    }\r\n\r\n    const onDone = () => {\r\n        props.setDirty(true)\r\n        setFormVisible(false);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <h1 className=\"title mb-5\">Workspaces</h1>\r\n            <Container className=\"d-flex flex-wrap justify-content-center\" >\r\n                {\r\n                    props.workareaList.map(w =>\r\n                        <HomeWorkspace key={w.id} ws={w} deleteWorkspace={props.deleteWorkarea} />\r\n                    )\r\n                }\r\n            </Container>            \r\n            {formVisible ?\r\n                <HomeWorkspaceForm addNewWorkarea={addNewWorkarea} onDone={onDone} onClose={onClose} />\r\n                :\r\n                <PlusSquareFill size={48} color=\"#4c4c4c\"\r\n                    className=\"mx-auto my-4 cursor-pointer hover-opaque\"\r\n                    onClick={() => setFormVisible(true)}\r\n                />\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home;","import { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nconst useWindowDimensions = () => {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}\r\n\r\nconst moveNote = (unsortedNotes, currentNote, direction) => {\r\n  console.log(currentNote)\r\n  const currentIndex = unsortedNotes.findIndex((note) => note.id === currentNote.id);\r\n  const previousIndex = unsortedNotes.findIndex((note) => note.id === currentNote.previous);\r\n  const afterIndex = unsortedNotes.findIndex((note) => note.id === currentNote.after);\r\n\r\n  if (direction > 0) {\r\n    const prevSqIndex = unsortedNotes.findIndex((note) => note.id === unsortedNotes[previousIndex].previous);\r\n\r\n    if (unsortedNotes[currentIndex].after !== 0) {\r\n      if (unsortedNotes[prevSqIndex]) {\r\n        unsortedNotes[prevSqIndex].after = unsortedNotes[currentIndex].id;\r\n      }\r\n\r\n      unsortedNotes[currentIndex].previous = unsortedNotes[previousIndex].previous;\r\n      unsortedNotes[currentIndex].after = unsortedNotes[previousIndex].id;\r\n\r\n      unsortedNotes[previousIndex].previous = unsortedNotes[currentIndex].id;\r\n      unsortedNotes[previousIndex].after = unsortedNotes[afterIndex].id;\r\n\r\n      unsortedNotes[afterIndex].previous = unsortedNotes[previousIndex].id;\r\n    }\r\n    else {\r\n      if (unsortedNotes[prevSqIndex]) {\r\n        unsortedNotes[prevSqIndex].after = unsortedNotes[currentIndex].id;\r\n      }\r\n\r\n      unsortedNotes[currentIndex].after = unsortedNotes[currentIndex].previous;\r\n      unsortedNotes[currentIndex].previous = unsortedNotes[previousIndex].previous;\r\n\r\n      unsortedNotes[previousIndex].previous = unsortedNotes[currentIndex].id;\r\n      unsortedNotes[previousIndex].after = 0;\r\n    }\r\n  }\r\n  else {\r\n    const afterSqIndex = unsortedNotes.findIndex((note) => note.id === unsortedNotes[afterIndex].after);\r\n\r\n    if (unsortedNotes[currentIndex].previous !== 0) {\r\n      unsortedNotes[previousIndex].after = unsortedNotes[afterIndex].id;\r\n\r\n      unsortedNotes[currentIndex].previous = unsortedNotes[afterIndex].id;\r\n      unsortedNotes[currentIndex].after = unsortedNotes[afterIndex].after;\r\n\r\n      unsortedNotes[afterIndex].previous = unsortedNotes[previousIndex].id;\r\n      unsortedNotes[afterIndex].after = unsortedNotes[currentIndex].id;\r\n\r\n      if (unsortedNotes[afterSqIndex]) {\r\n        unsortedNotes[afterSqIndex].previous = unsortedNotes[currentIndex].id;\r\n      }\r\n    }\r\n    else {\r\n      unsortedNotes[currentIndex].previous = unsortedNotes[afterIndex].id;\r\n      unsortedNotes[currentIndex].after = unsortedNotes[afterIndex].after;\r\n\r\n      unsortedNotes[afterIndex].previous = 0;\r\n      unsortedNotes[afterIndex].after = unsortedNotes[currentIndex].id;\r\n\r\n      if (unsortedNotes[afterSqIndex]) {\r\n        unsortedNotes[afterSqIndex].previous = unsortedNotes[currentIndex].id;\r\n      }\r\n    }\r\n  }\r\n\r\n  return unsortedNotes;\r\n};\r\n\r\nconst insertNote = (unsortedNotes, currentNote, newNote) => {\r\n  const currentIndex = unsortedNotes.findIndex((note) => note.id === currentNote.id);\r\n  const afterIndex = unsortedNotes.findIndex((note) => note.id === currentNote.after);\r\n\r\n  unsortedNotes[currentIndex].after = newNote.id;\r\n\r\n  if (unsortedNotes[afterIndex]) unsortedNotes[afterIndex].previous = newNote.id;\r\n\r\n  newNote.previous = unsortedNotes[currentIndex].id;\r\n\r\n  if (unsortedNotes[afterIndex]) newNote.after = unsortedNotes[afterIndex].id;\r\n  else newNote.after = 0;\r\n\r\n  unsortedNotes.push(newNote);\r\n\r\n  return unsortedNotes;\r\n};\r\n\r\nconst getMaxId = (list) => {\r\n  return list.reduce((a, b) => a.id > b.id ? a : b).id;\r\n};\r\n\r\nconst insertBefore = (string, insert, index) => {\r\n  return string.slice(0, index) + insert + string.slice(index,);\r\n};\r\n\r\nconst insertBeforeAndAfter = (string, insertBefore, insertAfter, startIndex, endIndex) => {\r\n  return string.slice(0, startIndex) + insertBefore + string.slice(startIndex, endIndex) + insertAfter + string.slice(endIndex,);\r\n};\r\n\r\nconst getMaxSlot = (wsWindows) => {\r\n  let max = 0;\r\n\r\n  Object.entries(wsWindows).forEach(([key, value]) => {\r\n    if (value.slot && value.slot > max) {\r\n      max = value.slot;\r\n    }\r\n  });\r\n\r\n  return max;\r\n};\r\n\r\nconst utility = { moveNote, insertNote, getMaxId, useWindowDimensions, insertBefore, insertBeforeAndAfter, getMaxSlot };\r\nexport default utility;","import { Navbar, Container, Button, FormControl, Form, Nav } from \"react-bootstrap\";\r\nimport { useLocation } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { JournalBookmarkFill, CalendarDate, FileEarmarkText, FileRichtext, JournalBookmark, CalendarDateFill, FileEarmarkTextFill, FileRichtextFill, ArrowLeft } from 'react-bootstrap-icons';\r\nimport utility from \"./utility\";\r\n\r\n\r\nfunction Header(props) {\r\n    const location = useLocation();\r\n\r\n    let ws;\r\n    if (location.state) ws = location.state.currentWorkspace;\r\n\r\n    const { wsWindows } = props;\r\n\r\n    const manageWindows = (currentWindow) => {\r\n        let oldWindows = {...wsWindows};\r\n\r\n        if (wsWindows[currentWindow].show) {\r\n            Object.entries(wsWindows).forEach( ([key, value]) => {\r\n                if (key === \"nWsWindows\") oldWindows[key] = value - 1;\r\n                else if (value.slot > wsWindows[currentWindow].slot) oldWindows[key] = {...value, slot: value.slot - 1};\r\n                else if (key === currentWindow) oldWindows[key] = {...value, slot: undefined, show: false};\r\n            });\r\n        }\r\n        else {\r\n            oldWindows = {\r\n                ...wsWindows,\r\n                nWsWindows: wsWindows.nWsWindows + 1,\r\n                [currentWindow]: {\r\n                    ...wsWindows[currentWindow],\r\n                    slot: utility.getMaxSlot(wsWindows) + 1,\r\n                    show: true,                \r\n                },\r\n            };\r\n        }\r\n\r\n        props.setWsWindows({...oldWindows});\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Navbar className=\"myNav\" expand=\"lg\" ref={props.elementRef}>\r\n                <Container>\r\n                    {location.pathname === \"/\" ?\r\n                        <>\r\n                            <Navbar.Brand ><h3>finTHESIS</h3></Navbar.Brand>\r\n                            <Form className=\"d-flex\">\r\n                                <FormControl type=\"search\" placeholder=\"Search\" className=\"me-2\" aria-label=\"Search\" />\r\n                                <Button variant=\"outline-success\">Search</Button>\r\n                            </Form>\r\n                        </>\r\n                        :\r\n                        <>\r\n                            <span className=\"d-flex align-items-center\" >\r\n                                <Link to=\"/\" className=\"no-link-style hover-scaleup-12 me-3\" ><ArrowLeft size={36} /></Link>\r\n                                <Navbar.Brand ><h3>{ws.name}</h3></Navbar.Brand>\r\n                            </span>\r\n                            <Nav style={{display:'flex', flexDirection:'row'}}>\r\n                                <Nav.Link className='icon-button' onClick={() => manageWindows(\"notebook\")}>\r\n                                    {wsWindows.notebook.show ? <JournalBookmarkFill /> : <JournalBookmark />}\r\n                                    <br />\r\n                                    <span>Notebook</span>\r\n                                </Nav.Link>\r\n                                <Nav.Link className='icon-button' onClick={() => manageWindows(\"calendar\")}>\r\n                                    {wsWindows.calendar.show ? <CalendarDateFill /> : <CalendarDate />}\r\n                                    <br />\r\n                                    <span>Calendar</span>\r\n                                </Nav.Link>\r\n                                <Nav.Link className='icon-button' onClick={() => manageWindows(\"files\")}>\r\n                                    {wsWindows.files.show ? <FileEarmarkTextFill /> : <FileEarmarkText />}\r\n                                    <br />\r\n                                    <span>Files</span>\r\n                                </Nav.Link>\r\n                                <Nav.Link className='icon-button' onClick={() => manageWindows(\"reports\")}>\r\n                                    {wsWindows.reports.show ? <FileRichtextFill /> : <FileRichtext />}\r\n                                    <br />\r\n                                    <span>Report</span>\r\n                                </Nav.Link>\r\n                            </Nav>\r\n                        </>\r\n                    }\r\n\r\n                </Container>\r\n            </Navbar>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Header;","import { Button, Card, Navbar, Container, Form, FormControl } from \"react-bootstrap\"\r\n\r\nexport function ToolbarNotes(props) {\r\n    return (\r\n        <Navbar bg=\"dark\" variant=\"dark\" expand=\"lg\">\r\n            <Container fluid>\r\n                {/* <Button onClick={ props.setShowChapterModal(true) } variant=\"secondary\">New Chapter</Button> */}\r\n                <Form className=\"d-flex\">\r\n                    <FormControl type=\"search\" placeholder=\"Search\"\r\n                        value={props.search} onChange={ (e) => props.setSearch(e.target.value) } \r\n                        className=\"me-2\" aria-label=\"Search\"/>\r\n                </Form>\r\n            </Container>\r\n        </Navbar>\r\n    )\r\n}\r\n\r\nexport function ToolbarReports(props) {\r\n    return (\r\n        <>\r\n            <Card className=\"toolbar\">\r\n                <Button onClick={()=> props.setPreview(!props.preview)}>Preview</Button>\r\n            </Card>\r\n        </>\r\n    )\r\n}","\r\nimport React, { useState } from \"react\";\r\nimport { Dropdown, Button, Form } from \"react-bootstrap\";\r\nimport { ChevronDown, ChevronUp, Plus, ThreeDotsVertical, Trash2Fill, PencilSquare, CaretRightFill, CodeSlash, CardText, Image } from \"react-bootstrap-icons\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { ToolbarNotes } from \"./Toolbar\";\r\nimport utility from './utility';\r\nimport { isPropsEqual } from \"@fullcalendar/react\";\r\nimport { ChapterModal } from \"./Modals/ChapterModal\";\r\n\r\nfunction Notes(props) {\r\n    const location = useLocation();\r\n    /* const [showChapterModal, setShowChapterModal] = useState(false); */\r\n    const [search, setSearch] = useState('');\r\n\r\n    let ws;\r\n    if (location.state) ws = location.state.currentWorkspace;\r\n\r\n    const sortNotes = (unsortedNotes) => {\r\n        let prev = 0;\r\n        let newPrev;\r\n        let sortedNotes = [];\r\n\r\n        unsortedNotes.forEach(note => {\r\n            sortedNotes.push(unsortedNotes.find(n => {\r\n                newPrev = n.id;\r\n                return n.previous === prev;\r\n            }));\r\n\r\n            prev = newPrev;\r\n        });\r\n\r\n        return sortedNotes;\r\n    };\r\n\r\n    const filterNotes = (sortedNotes) => {\r\n        return sortedNotes.filter(note => note.text.toLowerCase().includes(search.toLowerCase()));\r\n    };\r\n\r\n    const moveNote = (currentNote, direction) => {\r\n        const unsortedNotes = utility.moveNote(props.noteList, currentNote, direction);\r\n\r\n        props.setNoteList([...unsortedNotes]);\r\n    };\r\n\r\n    const editNote = (currentNote) => {\r\n        const unsortedNotes = props.noteList;\r\n\r\n        const currentIndex = unsortedNotes.findIndex((note) => note.id === currentNote.id);\r\n        unsortedNotes[currentIndex] = currentNote;\r\n\r\n        props.setNoteList([...unsortedNotes]);\r\n    };\r\n\r\n    const addNote = (currentNote) => {\r\n        const newNote = {\r\n            id: utility.getMaxId(props.noteList) + 1,\r\n            text: \"\",\r\n            type: \"note\",\r\n            workspace: currentNote.workspace,\r\n            father: currentNote.father,\r\n            editMode: true,\r\n        };\r\n        const unsortedNotes = utility.insertNote(props.noteList, currentNote, newNote);\r\n\r\n        props.setNoteList([...unsortedNotes]);\r\n    };\r\n\r\n    const deleteNote = (currentNote) => {\r\n        const unsortedNotes = props.noteList;\r\n\r\n        const currentIndex = unsortedNotes.findIndex((note) => note.id === currentNote.id);\r\n        const previousIndex = unsortedNotes.findIndex((note) => note.id === currentNote.previous);\r\n        const afterIndex = unsortedNotes.findIndex((note) => note.id === currentNote.after);\r\n\r\n        unsortedNotes[previousIndex].after = currentNote.after;\r\n        unsortedNotes[afterIndex].previous = currentNote.previous;\r\n        unsortedNotes.splice(currentIndex, 1);\r\n\r\n        props.setNoteList([...unsortedNotes]);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* <ToolbarNotes setShowChapterModal={setShowChapterModal} noteList={notes} /> */}\r\n            <ToolbarNotes search={search} setSearch={setSearch} />\r\n            {\r\n                filterNotes(sortNotes(props.noteList.filter(note => note.workspace === ws.id && !note.father)))\r\n                    .map(note => <Note key={note.id} note={note} sortNotes={sortNotes} filterNotes={filterNotes}\r\n                        moveNote={moveNote} addNote={addNote} editNote={editNote} deleteNote={deleteNote} ws={ws} noteList={props.noteList}\r\n                        childrenNotes={props.noteList.filter(n => n.workspace === ws.id && n.father === note.id)}\r\n                    />)\r\n            }\r\n            { //showChapterModal && <ChapterModal addNote={addNote} setShowChapterModal={setShowChapterModal}/>\r\n                // ATTENTION this is always true, doesnt even close\r\n            }\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nfunction Note(props) {\r\n    const { note, childrenNotes, filterNotes, sortNotes, moveNote, addNote, editNote, deleteNote } = props;\r\n\r\n    const [showControls, setShowControls] = useState(false);\r\n    const [showChildren, setShowChildren] = useState(false);\r\n    const [editMode, setEditMode] = useState(note.editMode ? note.editMode : false);\r\n\r\n    return (\r\n        <>\r\n            {!editMode ?\r\n                <div className={\"note d-flex p-1 \" + (note.type === \"chapter\" && \"py-5\")}\r\n                    style={{ minHeight: note.text.length < 50 && !note.text.includes(\"\\n\") ? \"2.5rem\" : \"none\" }}\r\n                    onMouseEnter={() => setShowControls(true)}\r\n                    onMouseLeave={() => setShowControls(false)}\r\n                >\r\n                    <span className=\"d-flex flex-row align-items-center\" style={{ minWidth: \"42px\" }}>\r\n                        {showControls &&\r\n                            <NoteControls\r\n                                note={note}\r\n                                showControls={showControls}\r\n                                setShowControls={setShowControls}\r\n                                moveNote={moveNote}\r\n                                addNote={addNote}\r\n                            />\r\n                        }\r\n                    </span>\r\n                    <NoteContent note={note} showControls={showControls} showChildren={showChildren}\r\n                        setShowChildren={setShowChildren} setEditMode={setEditMode}\r\n                    />\r\n                    {showControls && <NoteMenu />}\r\n                </div>\r\n                : <NoteForm note={note} editNote={editNote} deleteNote={deleteNote} setEditMode={setEditMode} />\r\n            }\r\n            {childrenNotes.length > 0 && showChildren ?\r\n                <div className={note.type !== \"chapter\" ? \"ms-4\" : \"\"} >\r\n                    {filterNotes(sortNotes(childrenNotes))\r\n                        .map(note => <Note key={note.id} note={note} sortNotes={sortNotes} filterNotes={filterNotes}\r\n                            moveNote={moveNote} addNote={addNote} editNote={editNote} deleteNote={deleteNote} ws={props.ws} noteList={props.noteList}\r\n                            childrenNotes={props.noteList.filter(n => n.workspace === props.ws.id && n.father === note.id)}\r\n                        />)}\r\n                </div>\r\n                : ''\r\n            }\r\n        </>\r\n    );\r\n}\r\n\r\nfunction NoteContent(props) {\r\n    return (\r\n        <span className={\"w-100 ms-3 text-start d-flex align-items-center \" + (props.note.type === \"notegroup\" && \"fw-bold\")}\r\n            onClick={() => props.note.text === '' ? props.setEditMode(true) : ''}\r\n        >\r\n            {props.note.type === \"note\" && <span onClick={() => props.setEditMode(true)}>{props.note.text}</span>}\r\n            {props.note.type === \"notegroup\" &&\r\n                <>\r\n                    <CaretRightFill size={12} style={{ marginLeft: \"-3px\" }}\r\n                        className={\"cursor-pointer rotate-90 \" + (props.showChildren && \" open\")}\r\n                        onClick={() => props.setShowChildren(!props.showChildren)}\r\n                    />\r\n                    {<span onClick={() => props.setEditMode(true)}>{props.note.text}</span>}\r\n                </>\r\n            }\r\n            {props.note.type === \"chapter\" && <h2 style={{ marginLeft: \"-3px\" }}>{props.note.text}</h2>}\r\n            {props.note.type === \"chapter\" && props.showControls &&\r\n                <Button variant=\"light\" className=\"ms-3\" onClick={() => props.setShowChildren(!props.showChildren)}>\r\n                    {props.showChildren ? \"Collapse\" : \"Expand\"}\r\n                </Button>\r\n            }\r\n            {props.note.type === \"code\" && <NoteMarkdown text={'```' + props.note.text} />}\r\n            {props.note.type === \"image\" && <NoteMarkdown text={'![](' + props.note.text + ')'} />}\r\n        </span>\r\n    );\r\n}\r\n\r\nfunction NoteMarkdown(props) {\r\n    return (\r\n        <ReactMarkdown className=\"markdown m-0 p-0\" >{props.text}</ReactMarkdown>\r\n    );\r\n}\r\n\r\nfunction NoteControls(props) {\r\n    return (\r\n        <>\r\n            <span className=\"d-flex flex-column\" >\r\n                <ChevronUp\r\n                    size={18}\r\n                    color=\"#4b4b4b\"\r\n                    className={props.note.previous !== 0 ? \"hover-opaque cursor-pointer\" : \"opacity-07\"}\r\n                    style={{ position: \"relative\", marginBottom: \"-11px\", transform: \"translateY(-10px)\" }}\r\n                    onClick={() => {\r\n                        if (props.note.previous !== 0) {\r\n                            props.moveNote(props.note, 1);\r\n                            props.setShowControls(false);\r\n                        }\r\n                    }}\r\n                />\r\n                <ChevronDown\r\n                    size={18}\r\n                    color=\"#4b4b4b\"\r\n                    className={props.note.after !== 0 ? \"hover-opaque cursor-pointer\" : \"opacity-07\"}\r\n                    style={{ position: \"relative\", marginTop: \"-11px\", transform: \"translateY(10px)\" }}\r\n                    onClick={() => {\r\n                        if (props.note.after !== 0) {\r\n                            props.moveNote(props.note, -1);\r\n                            props.setShowControls(false);\r\n                        }\r\n                    }}\r\n                />\r\n            </span>\r\n            <span>\r\n                <Plus\r\n                    size={24}\r\n                    color=\"#4b4b4b\"\r\n                    className=\"hover-opaque cursor-pointer\"\r\n                    style={{ position: \"relative\" }}\r\n                    onClick={() => props.addNote(props.note)}\r\n                />\r\n            </span>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction NoteMenu(props) {\r\n    const CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\r\n        <a\r\n            href=\"\"\r\n            ref={ref}\r\n            onClick={e => {\r\n                e.preventDefault();\r\n                onClick(e);\r\n            }}\r\n            style={{ marginTop: \"-4px\" }}\r\n        >\r\n            {children}\r\n        </a>\r\n    ));\r\n\r\n    const CustomMenu = React.forwardRef(\r\n        ({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\r\n            const [value, setValue] = useState('');\r\n\r\n            return (\r\n                <div\r\n                    ref={ref}\r\n                    style={style}\r\n                    className={className}\r\n                    aria-labelledby={labeledBy}\r\n                >\r\n                    <ul className=\"list-unstyled m-0\">\r\n                        {React.Children.toArray(children).filter(\r\n                            child =>\r\n                                !value || child.props.children.toLowerCase().startsWith(value)\r\n                        )}\r\n                    </ul>\r\n                </div>\r\n            );\r\n        }\r\n    );\r\n    return (\r\n        <Dropdown className=\"ml-auto cursor-pointer hover-opaque z-index-max d-flex align-items-center\" >\r\n            <Dropdown.Toggle as={CustomToggle} id=\"dropdown-custom-components\">\r\n                <ThreeDotsVertical color=\"#4b4b4b\" size={18} />\r\n            </Dropdown.Toggle>\r\n\r\n            <Dropdown.Menu className=\"z-index-max\" as={CustomMenu}>\r\n                <Dropdown.Item\r\n                    className=\"d-flex align-items-center px-3\"\r\n                    onClick={() => {  console.log(\"Notes.js NoteMenu Edit\") }}\r\n                >\r\n                    <PencilSquare className=\"mr-3\" size={16} />\r\n                    <span style={{ marginLeft: \"0.35rem\" }} >Edit</span>\r\n                </Dropdown.Item>\r\n                <Dropdown.Item\r\n                    className=\"d-flex align-items-center px-3\"\r\n                    onClick={() => { console.log(\"Notes.js NoteMenu Delete\") }}\r\n                >\r\n                    <Trash2Fill className=\"mr-3\" size={16} />\r\n                    <span style={{ marginLeft: \"0.35rem\" }} >Delete</span>\r\n                </Dropdown.Item>\r\n            </Dropdown.Menu>\r\n        </Dropdown>\r\n    );\r\n}\r\n\r\nfunction NoteForm(props) {\r\n    const { note } = props;\r\n\r\n    const [text, setText] = useState(note.text ? note.text : '');\r\n    const [show, setShow] = useState(false);\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        setShow(false);\r\n\r\n        props.editNote(note);\r\n        props.setEditMode(false);\r\n    };\r\n\r\n    const handleChange = (event) => {\r\n        setText(event.target.value);\r\n        setShow(!event.target.value);\r\n        // setmenutop con l'altezza della textarea per posizionare il menu\r\n        event.target.style.height = 'inherit';\r\n        event.target.style.height = `${event.target.scrollHeight}px`;\r\n\r\n        note.text = event.target.value;\r\n    };\r\n\r\n    const handleKeyDown = (key) => {\r\n        if (key === \"Backspace\" && text === '') props.deleteNote(note);\r\n    };\r\n\r\n    return (\r\n        <div className=\"note p-1 d-flex\">\r\n            <span style={{ minWidth: \"42px\" }} />\r\n            <Form className=\"d-flex ms-3 w-100\" onSubmit={handleSubmit}>\r\n                <Form.Control\r\n                    type=\"text\"\r\n                    as=\"textarea\"\r\n                    value={text}\r\n                    className=\"transparent no-borders p-0 my-1 w-100 min-height-0 resize-none\"\r\n                    onChange={(ev) => handleChange(ev)}\r\n                    onKeyDown={(ev) => handleKeyDown(ev.key)}\r\n                    onFocus={() => setShow(true)}\r\n                    onBlur={(ev) => handleSubmit(ev)}\r\n                    autoFocus\r\n                />\r\n                {/* <X size={32} color=\"#4c4c4c\" className=\"my-auto ms-2 cursor-pointer hover-scaleup-12\" onClick={() => { }} />\r\n                <Check2 size={32} color=\"#4c4c4c\" className=\"my-auto cursor-pointer hover-scaleup-12\" onClick={(e) => handleSubmit(e)} /> */}\r\n            </Form>\r\n            <Dropdown.Menu show={show} className=\"z-index-max\" style={{ margin: \"75px 0 0 42px\" }}>\r\n                <Dropdown.Item\r\n                    className=\"d-flex align-items-center px-3\"\r\n                    onClick={() => { console.log(\"Notes.js Image\") }}\r\n                >\r\n                    <Image className=\"mr-3\" size={16} />\r\n                    <span style={{ marginLeft: \"0.35rem\" }} >Image</span>\r\n                </Dropdown.Item>\r\n                <Dropdown.Item\r\n                    className=\"d-flex align-items-center px-3\"\r\n                    onClick={() => { console.log(\"Notes.js Group\")}}\r\n                >\r\n                    <CaretRightFill className=\"mr-3\" size={16} />\r\n                    <span style={{ marginLeft: \"0.35rem\" }} >Group</span>\r\n                </Dropdown.Item>\r\n                <Dropdown.Item\r\n                    className=\"d-flex align-items-center px-3\"\r\n                    onClick={() => {  console.log(\"Notes.js Chapter\") }}\r\n                >\r\n                    <CardText className=\"mr-3\" size={16} />\r\n                    <span style={{ marginLeft: \"0.35rem\" }} >Chapter</span>\r\n                </Dropdown.Item>\r\n                <Dropdown.Item\r\n                    className=\"d-flex align-items-center px-3\"\r\n                    onClick={() => { console.log(\"Notes.js Code\") }}\r\n                >\r\n                    <CodeSlash className=\"mr-3\" size={16} />\r\n                    <span style={{ marginLeft: \"0.35rem\" }} >Code</span>\r\n                </Dropdown.Item>\r\n                \r\n            </Dropdown.Menu>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Notes;","//import { ToolbarReports } from \"./Toolbar\";\r\n\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { useState, useEffect } from \"react\";\r\nimport { Form, Card, Button, Row, Col } from \"react-bootstrap\";\r\nimport * as Icon from 'react-bootstrap-icons';\r\n\r\nimport utility from './utility';\r\n\r\nfunction Reports(props) {\r\n    const [preview, setPreview] = useState(false);\r\n    const [text, setText] = useState(\"\");\r\n    const [selection, setSelection] = useState({ start: 0, end: 0 });\r\n\r\n    return (\r\n        <>\r\n            <ToolbarReports preview={preview} setPreview={setPreview} selection={selection} text={text} setText={setText} />\r\n            {preview ?\r\n                <ReactMarkdown className=\"markdown\" style={{ maxWidth: \"80vw\" }} >{text}</ReactMarkdown>\r\n                :\r\n                <TextEditor className=\"h-100\" text={text} setText={setText} setSelection={setSelection} />\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nfunction TextEditor(props) {\r\n\r\n    useEffect(() => {\r\n        const mdTextarea = document.getElementById(\"md-textarea\");\r\n\r\n        document.addEventListener(\"selectionchange\", () => {\r\n            props.setSelection({ start: mdTextarea.selectionStart, end: mdTextarea.selectionEnd });\r\n        });\r\n\r\n        mdTextarea.addEventListener(\"selectionchange\", () => {\r\n            props.setSelection({ start: mdTextarea.selectionStart, end: mdTextarea.selectionEnd });\r\n        });\r\n\r\n        return () => {\r\n            document.removeEventListener(\"selectionchange\", () => {\r\n                props.setSelection({ start: mdTextarea.selectionStart, end: mdTextarea.selectionEnd });\r\n            });\r\n\r\n            mdTextarea.removeEventListener(\"selectionchange\", () => {\r\n                props.setSelection({ start: mdTextarea.selectionStart, end: mdTextarea.selectionEnd });\r\n            });\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <Form.Control\r\n            id=\"md-textarea\"\r\n            type=\"text\"\r\n            as=\"textarea\"\r\n            className=\"textarea transparent h-100\"\r\n            value={props.text}\r\n            onChange={(event) => {\r\n                props.setText(event.target.value);\r\n            }}\r\n        ></Form.Control>\r\n    );\r\n}\r\n\r\nfunction ToolbarReports(props) {\r\n    const { text, selection } = props;\r\n\r\n    const addMdSyntax = (syntaxType) => {\r\n        let newText = \"\";\r\n\r\n        switch (syntaxType) {\r\n            case \"h1\":\r\n                newText = utility.insertBefore(text, \"# \", selection.start);\r\n                break;\r\n            case \"bold\":\r\n                newText = utility.insertBeforeAndAfter(text, \"**\", \"**\", selection.start, selection.end);\r\n                break;\r\n            case \"italic\":\r\n                newText = utility.insertBeforeAndAfter(text, \"*\", \"*\", selection.start, selection.end);\r\n                break;\r\n            case \"underline\":\r\n                // TO DO, insert </ins> after\r\n                newText = utility.insertBeforeAndAfter(text, \"<ins>\", \"</ins>\", selection.start, selection.end);\r\n                break;\r\n            case \"code\":\r\n                newText = utility.insertBeforeAndAfter(text, \"```\\n\", \"\\n```\", selection.start, selection.end);\r\n                break;\r\n            case \"table\":\r\n                // tables apparently don't work in this markdown\r\n                newText = utility.insertBefore(text,\r\n`| Syntax      | Description | Test Text     |\r\n| :---        |    :----:   |          ---: |\r\n| Header      | Title       | Here's this   |\r\n| Paragraph   | Text        | And more      |`\r\n                    , selection.start);\r\n                break;\r\n            case \"link\":\r\n                newText = utility.insertBefore(text, \"[Site Name](https://sitename.com)\", selection.start);\r\n                break;\r\n            case \"image\":\r\n                newText = utility.insertBefore(text, `![cGAN!](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/526744/4f90a48f-d6d6-1c69-1a09-3ae44040da0e.jpeg)`, selection.start);\r\n                break;\r\n        }\r\n\r\n        props.setText(newText);\r\n    };\r\n\r\n    return (\r\n        <Card>\r\n            <Row style={{ display: 'flex', alignItems: 'center' }}>\r\n                <Col>\r\n                    <Icon.ArrowLeft className='icon-button' size={26} />\r\n                    <Icon.ArrowReturnLeft className='icon-button' size={26} />\r\n                    <Icon.ArrowReturnRight className='icon-button' size={26} />\r\n                </Col>\r\n                <>|</>\r\n                <Col>\r\n                    <Icon.TypeBold className='icon-button' onClick={() => addMdSyntax(\"bold\")} size={20} />\r\n                    <Icon.TypeItalic className='icon-button' onClick={() => addMdSyntax(\"italic\")} size={20} />\r\n                    <Icon.TypeUnderline className='icon-button' onClick={() => addMdSyntax(\"underline\")} size={20} />\r\n                </Col>\r\n                <>|</>\r\n                <Col>\r\n                    <Icon.TypeH1 className='icon-button' onClick={() => addMdSyntax(\"h1\")} size={20} />\r\n                    <Icon.CodeSlash className='icon-button' onClick={() => addMdSyntax(\"code\")} size={20} />\r\n                    <Icon.Grid3x3 className='icon-button' onClick={() => addMdSyntax(\"table\")} size={20} />\r\n                    <Icon.Link className='icon-button' onClick={() => addMdSyntax(\"link\")} size={20} />\r\n                    <Icon.Image className='icon-button' onClick={() => addMdSyntax(\"image\")} size={20} />\r\n                </Col>\r\n                <>|</>\r\n                <Col>\r\n                    <Icon.Upload className='icon-button' size={20} />\r\n                    <Button size='sm' style={{ borderRadius: '80px' }} onClick={() => props.setPreview(!props.preview)}>Preview</Button>\r\n                </Col>\r\n            </Row>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default Reports;","\r\nlet eventGuid = 0\r\nlet todayStr = new Date().toISOString().replace(/T.*$/, '') // YYYY-MM-DD of today\r\n\r\nexport const INITIAL_EVENTS = [\r\n  {\r\n    id: createEventId(),\r\n    title: 'All-day event',\r\n    start: todayStr\r\n  },\r\n  {\r\n    id: createEventId(),\r\n    title: 'Timed event',\r\n    start: todayStr + 'T12:00:00'\r\n  }\r\n]\r\n\r\nexport function createEventId() {\r\n  return String(eventGuid++)\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport FullCalendar, { formatDate } from '@fullcalendar/react'\r\nimport dayGridPlugin from '@fullcalendar/daygrid'\r\nimport timeGridPlugin from '@fullcalendar/timegrid'\r\nimport interactionPlugin from '@fullcalendar/interaction'\r\nimport { INITIAL_EVENTS, createEventId } from './event-utils'\r\n\r\n\r\nfunction Calendar(props) {\r\n\r\n    const [weekendsVisible, setWeekendsVisible] = useState(true);\r\n    const [currentEvents, setCurrentEvents] = useState(props.noteList.map(row => ({\r\n        id: row.id,\r\n        title: row.text,\r\n        start: row.insert_date\r\n    })));\r\n\r\n    const calendarComponentRef = React.createRef();\r\n\r\n    function renderEventContent(eventInfo) {\r\n        return (\r\n          <>\r\n            <b>{eventInfo.timeText}</b> \r\n            <i> {eventInfo.event.title}</i>\r\n          </>\r\n        )\r\n    }\r\n    \r\n    const handleDateSelect = (selectInfo) => {\r\n        \r\n        let calendarApi = calendarComponentRef.current.getApi();\r\n        calendarApi.changeView(\"timeGridDay\")\r\n        calendarApi.gotoDate(selectInfo.dateStr); // call a method on the Calendar object\r\n\r\n\r\n\r\n        // let title = prompt('Please enter a new title for your event')\r\n        // let calendarApi = selectInfo.view.calendar\r\n    \r\n        // // calendarApi.unselect() // clear date selection\r\n    \r\n        // if (title) {\r\n        //   calendarApi.addEvent({\r\n        //     id: createEventId(),\r\n        //     title,\r\n        //     start: selectInfo.startStr,\r\n        //     end: selectInfo.endStr,\r\n        //     allDay: selectInfo.allDay\r\n        //   })\r\n        // }\r\n    }\r\n    \r\n    const handleEventClick = (clickInfo) => {\r\n        \r\n    }\r\n\r\n    const handleEvents = (events) => {\r\n        setCurrentEvents(events);\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <div style={{ mmaxHeight: \"50%\", maxWidth: \"100%\"}}>\r\n            <FullCalendar \r\n                plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\r\n                headerToolbar={{\r\n                    left: 'prev,today,next',\r\n                    center: 'title',\r\n                    right: 'dayGridMonth,timeGridDay'\r\n                }}\r\n                initialView='dayGridMonth'\r\n                editable={false}\r\n                selectable={true}\r\n                selectMirror={true}\r\n                dayMaxEvents={true}\r\n                ref={calendarComponentRef} \r\n                weekends={weekendsVisible}\r\n                initialEvents={currentEvents} // alternatively, use the `events` setting to fetch from a feed\r\n                // select={handleDateSelect}\r\n                dateClick={handleDateSelect}\r\n                eventContent={renderEventContent} // custom render function\r\n                eventClick={handleEventClick}\r\n                eventsSet={handleEvents} // called after events are initialized/added/changed/removed\r\n                />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Calendar;","import { useState } from 'react';\r\nimport { DropdownButton, Row, Col, Form } from 'react-bootstrap';\r\n\r\nfunction FileManager(){\r\n\tconst [selectedFile, setSelectedFile] = useState();\r\n\tconst [isFilePicked, setIsFilePicked] = useState(false);\r\n  const [list, setList]= useState([]);\r\n  let todayStr = new Date().toISOString().replace(/T.*$/, '') // YYYY-MM-DD of today\r\n\r\n\tconst changeHandler = (event) => {\r\n\t\tsetSelectedFile(event.target.files[0]);\r\n\t\tsetIsFilePicked(true);\r\n\t};\r\n\r\n\tconst handleSubmission = () => {\r\n    setList([...list, selectedFile]);\r\n    console.log(list);\r\n\t};\r\n\r\n\treturn(\r\n    <div>\r\n      <Row>\r\n        <Col>\r\n          <Form.Group controlId=\"formFileMultiple\" className=\"mb-3\" onChange={changeHandler}>\r\n            <Form.Label>Multiple files input </Form.Label>\r\n            <Form.Control type=\"file\" multiple />\r\n          </Form.Group>\r\n        </Col>\r\n        <Col>\r\n          {isFilePicked ? (\r\n            <>\r\n                <p>Filename: {selectedFile.name}</p>\r\n                <p>Filetype: {selectedFile.type}</p>\r\n                <p>Size in bytes: {selectedFile.size}</p>\r\n                <p>\r\n                  lastModifiedDate:{' '}\r\n                  {todayStr}\r\n                </p>\r\n              </>\r\n          ) : (\r\n            <p>Select a file to show details</p>\r\n          )}\r\n          <div>\r\n            <button onClick={handleSubmission}>Submit</button>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n            {list.map(e=>\r\n              <>\r\n                <a href = {e} target = \"_blank\">{e.name}</a>\r\n                <embed src={e} width=\"800px\" height=\"2100px\" />\r\n              </>  \r\n              )\r\n            }\r\n      </Row>\r\n      \r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default FileManager;","import Notes from \"./Notes\";\r\nimport Reports from \"./Reports\";\r\nimport Calendars from \"./Calendar\";\r\nimport utility from \"./utility\";\r\nimport FilesDemo from \"./FileManager\";\r\n\r\nimport { Button, Card, Container } from \"react-bootstrap\";\r\n\r\nfunction Workspace(props) {\r\n    const { height, width } = utility.useWindowDimensions();\r\n    const { wsWindows } = props;\r\n\r\n    // TODO fix switchRight when there are only 3 views active\r\n    const switchViews = (slot1, slot2) => {\r\n        let oldWindows = { ...wsWindows };\r\n\r\n        if (slot1 === 2 && slot2 === 4 && wsWindows.nWsWindows === 3) slot2 = 3;\r\n\r\n        Object.entries(wsWindows).forEach(([key, value]) => {\r\n            if (value.slot === slot1) oldWindows[key] = {...value, slot: slot2};\r\n            else if (value.slot === slot2) oldWindows[key] = {...value, slot: slot1};\r\n        });\r\n\r\n        props.setWsWindows({ ...oldWindows });\r\n    };\r\n\r\n    wsWindows.notebook.component = (\r\n        <Card key={4} className=\"ws-window\" style={{ maxHeight: (wsWindows.nWsWindows < 3 ? \"100%\" : \"49%\") }} >\r\n            <Notes noteList={props.noteList} setNoteList={props.setNoteList} />\r\n        </Card>\r\n    );\r\n    wsWindows.calendar.component = (\r\n        <Card key={2} className=\"ws-window\" style={{ maxHeight: (wsWindows.nWsWindows < 3 ? \"100%\" : \"49%\") }} >\r\n            <Calendars noteList={props.noteList} />\r\n        </Card>\r\n    );\r\n    wsWindows.files.component = (\r\n        <Card key={3} className=\"ws-window\" style={{ maxHeight: (wsWindows.nWsWindows < 3 ? \"100%\" : \"49%\") }} >\r\n            <FilesDemo />\r\n        </Card>\r\n    );\r\n    wsWindows.reports.component = (\r\n        <Card key={1} className=\"ws-window\" style={{ maxHeight: (wsWindows.nWsWindows < 3 ? \"100%\" : \"49%\") }} >\r\n            <Reports reportList={props.noteList} />\r\n        </Card>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            {wsWindows.nWsWindows > 2 && <Button onClick={() => switchViews(1, 3)}>SwitchLeft</Button>}\r\n            {wsWindows.nWsWindows > 1 && <Button onClick={() => switchViews(1, 2)}>SwitchTop</Button>}\r\n            {wsWindows.nWsWindows > 2 && <Button onClick={() => switchViews(2, 4)}>SwitchRight</Button>}\r\n            <Container fluid className=\"d-flex flex-wrap pb-3\" style={{ height: height - props.navHeight - 20 + \"px\" }} >\r\n                {\r\n                    Object.entries(wsWindows)\r\n                        .filter(([key, value]) => key !== \"nWsWindows\" && value.show)\r\n                        .sort((a, b) => a[1].slot - b[1].slot)\r\n                        .map(([key, value]) => value.component)\r\n                }\r\n            </Container>\r\n            {wsWindows.nWsWindows > 3 && <Button onClick={() => switchViews(3, 4)}>SwitchBottom</Button>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Workspace;","import './App.css';\r\nimport './markdown.css';\r\n\r\n//import './style.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Switch,\r\n} from 'react-router-dom';\r\n\r\nimport Home from './Home';\r\nimport Header from \"./Header\";\r\nimport Workspace from './Workspace';\r\nimport APIs from './API';\r\n\r\nfunction App() {\r\n  const [dirty, setDirty] = useState(true);\r\n\r\n  const [workareaList, setWorkareaList] = useState([]);\r\n  const [noteList, setNoteList] = useState([]);\r\n  const [reportList, setReportList] = useState([]);\r\n  const [wsWindows, setWsWindows] = useState({\r\n    nWsWindows: 1,\r\n    notebook: { show: true, slot: 1 },\r\n    calendar: { show: false },\r\n    files: { show: false },\r\n    reports: { show: false }\r\n  });\r\n\r\n  const [navHeight, setNavHeight] = useState(0);\r\n  const elementRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    setNavHeight(elementRef.current.clientHeight);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (dirty) {\r\n      APIs.getAllWorkareas().then(workareas => setWorkareaList(workareas));\r\n      APIs.getAllNotes().then(notes => setNoteList(notes));\r\n      setDirty(false);\r\n    }\r\n  }, [dirty]);\r\n\r\n  const deleteWorkarea = (workareaId) => {\r\n    \r\n    setWorkareaList(oldWorkareas => {\r\n      return oldWorkareas.map(wa => {\r\n        if (wa.id === workareaId) {\r\n          return { ...wa, status: 'deleting' };\r\n        }\r\n        else\r\n          return wa;\r\n      });\r\n    });\r\n\r\n    async function deleting(id) {\r\n      const response = await APIs.deleteWorkarea(id);\r\n      if (response.status === 'success') setDirty(true);\r\n    }\r\n\r\n    deleting(workareaId);\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <Header wsWindows={wsWindows} setWsWindows={setWsWindows} elementRef={elementRef} />\r\n        <Switch>\r\n          <Route exact path=\"/\" render={() => (\r\n            <Home workareaList={workareaList} setDirty={setDirty} deleteWorkarea={deleteWorkarea} />\r\n          )} />\r\n          <Route path=\"/workspace\" render={() => (\r\n            <Workspace noteList={noteList} setNoteList={setNoteList} reportList={reportList}\r\n              wsWindows={wsWindows} setWsWindows={setWsWindows} navHeight={navHeight} />\r\n          )} />\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}